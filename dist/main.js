!function(){"use strict";var e={30:function(){},607:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(s,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function r(e){try{c(i.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,r)}c((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,s,a,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,r[0]&&(o=0)),o;)try{if(n=1,i&&(s=2&r[0]?i.return:r[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){o=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){o.label=r[1];break}if(6===r[0]&&o.label<s[1]){o.label=s[1],s=r;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(r);break}s[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(601),o=n(270),r=n(706),c=n(294);(0,n(272).setPlaceholders)();var l=document.getElementById("modal"),d=document.getElementById("open-modal-btn"),u=document.getElementById("close-modal-btn");d.addEventListener("click",(function(e){l.style.display="block"})),u.addEventListener("click",(function(e){l.style.display="none"})),l.addEventListener("click",(function(e){e.target==l&&(l.style.display="none")}));var h=document.getElementById("multi-capture-btn"),f=document.getElementById("picture-count"),v=document.getElementById("countdown"),g=document.getElementById("flash"),m=document.getElementsByClassName("offpage-frame"),y=document.getElementById("caption"),p=new a.default(610,469),b=document.getElementById("video"),w=document.getElementById("reel");1!=p.playing&&p.startVideo(),y.style.display="none",h.addEventListener("click",(function(e){function t(e){return new Promise((function(t){return setTimeout(t,e)}))}p.playing&&function(){i(this,void 0,void 0,(function(){var e,n,i;return s(this,(function(a){switch(a.label){case 0:w.style.visibility="hidden",b.style.visibility="visible",h.disabled=!0,y.style.display="none",e=1,f.innerText="".concat(e," / 4"),n=function(n){var i,a;return s(this,(function(s){switch(s.label){case 0:return g.style.visibility="hidden",g.classList.remove("flash"),i=3,v.innerText=i.toString(),a=setInterval((function(){--i<1&&(i=1),v.innerText=i.toString()}),1e3),[4,t(3500)];case 1:return s.sent(),g.style.visibility="visible",g.classList.add("flash"),[4,t(500)];case 2:return s.sent(),clearInterval(a),e++,f.innerText="".concat(e," / 4"),new o.default(b,frames[n],610,469).offpageCopy(m[n]),[2]}}))},i=0,a.label=1;case 1:return i<m.length?[5,n(i)]:[3,4];case 2:a.sent(),a.label=3;case 3:return i++,[3,1];case 4:return y.style.display="block",v.innerText="",f.innerText="",g.style.visibility="hidden",g.classList.remove("flash"),w.style.visibility="visible",w.style.zIndex="0",b.style.visibility="hidden",h.disabled=!1,I(),[2]}}))}))}()}));var I=function(){new r.default(m,610,469).generateReel()},x=document.getElementById("frame-list"),E=document.getElementById("background-canvas"),k=document.getElementById("start-frame");E.width=800,E.height=650;var B=E.getContext("2d"),L=new Image;L.src="./assets/frame_".concat(k.dataset.frame,".png"),L.onload=function(){B.drawImage(L,0,0,800,650)},x.addEventListener("click",(function(e){var t=e.target;if("IMG"===t.tagName){k&&k.classList.remove("selected-frame"),t.classList.add("selected-frame"),k=t,E.width=800,E.height=650;var n=E.getContext("2d"),i=new Image;i.src="./assets/frame_".concat(t.dataset.frame,".png"),i.onload=function(){n.drawImage(i,0,0,800,650)}}}));var _=document.getElementById("sticker-list"),C=document.getElementById("sticker-canvas");C.width=800,C.height=525;var P,S=[];function j(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}_.addEventListener("click",(function(e){var t=e.target;if("LI"===t.parentNode.tagName){var n=t.dataset.type,i=new c.default(C,n);S.push(i)}})),C.addEventListener("mousedown",(function(e){for(var t=j(C,e),n=function(e){if(S[e].hit(t.x,t.y)){var n=S[e],i=C.getContext("2d");return P=function(e){t=j(C,e),n.posX=t.x,n.posY=t.y,i.clearRect(0,0,C.width,C.height);for(var s=0;s<S.length;s++)S[s].drawSticker()},C.addEventListener("mousemove",P),"break"}},i=0;i<S.length&&"break"!==n(i);i++);})),C.addEventListener("mouseup",(function(e){C.removeEventListener("mousemove",P)}));var T=document.getElementById("text-color-select"),O=document.getElementById("text-font-select"),M=document.getElementById("selected-text-color");T.addEventListener("click",(function(e){var t=e.target;"LI"===t.tagName&&(y.style.color=t.dataset.color),M&&M.classList.remove("selected-text-color"),t.classList.add("selected-text-color"),M=t}));var H=document.getElementById("selected-text-font");O.addEventListener("click",(function(e){var t=e.target;"LI"===t.tagName&&(y.style.fontFamily=t.dataset.font,"Sunspot"===t.dataset.font?(y.style.fontSize="36px",y.style.lineHeight="0.9em"):"Pacifico"===t.dataset.font?(y.style.fontSize="32px",y.style.lineHeight="1.3em"):(y.style.fontSize="28px",y.style.lineHeight="1.3em")),H&&H.classList.remove("selected-text-font"),t.classList.add("selected-text-font"),H=t}))},294:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(626),s=function(){function e(e,t){this.canvas=e,this.width=75,this.height=75,this.posX=0,this.posY=0,this.sticker=new i.default(this.canvas,this.posX,this.posY,t),this.drawSticker()}return e.prototype.drawSticker=function(){this.sticker.drawSticker(this.posX,this.posY)},e.prototype.hit=function(e,t){var n=this.posX+this.width,i=this.posY+this.height;if(e>this.posX&&e<n&&t>this.posY&&t<i)return!0},e}();t.default=s},270:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,i){this.video=e,this.canvasFrame=t,this.videoWidth=n,this.videoHeight=i}return e.prototype.offpageCopy=function(e){e.width=this.videoWidth,e.height=this.videoHeight,e.getContext("2d").drawImage(this.video,0,0,this.videoWidth,this.videoHeight)},e}();t.default=n},706:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n){this.offpageCanvasArray=e,this.reelFrames=document.getElementsByClassName("reel-frame"),this.offpageCanvasWidth=t,this.offpageCanvasHeight=n}return e.prototype.generateReel=function(){for(var e=0;e<this.offpageCanvasArray.length;e++){var t=this.reelFrames[e],n=this.offpageCanvasArray[e];t.width=300,t.height=225,t.getContext("2d").drawImage(n,0,0,this.offpageCanvasWidth,this.offpageCanvasHeight,0,0,300,225)}},e}();t.default=n},626:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,n,i){this.canvas=e,this.x=t,this.y=n,this.stickerType=i,this.stickerImage=new Image,this.stickerImage.src="./assets/sticker_".concat(this.stickerType,".png")}return e.prototype.drawSticker=function(e,t){this.x=e,this.y=t,this.canvas.getContext("2d").drawImage(this.stickerImage,this.x,this.y,75,75*this.stickerImage.height/this.stickerImage.width)},e}();t.default=n},272:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.setPlaceholders=void 0,t.setPlaceholders=function(){for(var e=document.getElementsByClassName("reel-frame"),t=function(t){var n=e[t];n.width=300,n.height=225;var i=n.getContext("2d"),s=new Image;s.src="./assets/Placeholder_".concat(t+1,".jpg"),s.onload=function(){i.drawImage(s,0,0,300,225)}},n=0;n<e.length;n++)t(n)}},601:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.width=e,this.height=t,this.playing=!1,this.videoElement=document.getElementById("video")}return e.prototype.startVideo=function(){var e={audio:!1,video:{width:this.width,height:this.height}};navigator.mediaDevices.getUserMedia(e).then(this.success.bind(this)).catch(this.error)},e.prototype.success=function(e){this.playing=!0,this.videoElement.srcObject=e},e.prototype.error=function(e){console.log(e)},e.prototype.stopVideo=function(){this.videoElement.srcObject.getTracks().forEach((function(e){e.stop()})),this.videoElement.srcObject=null,this.playing=!1},e}();t.default=n}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n(607),n(30)}();
//# sourceMappingURL=main.js.map