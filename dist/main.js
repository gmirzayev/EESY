!function(){"use strict";!function(){var t=class{constructor(t,e,s,i){this.video=t,this.canvasFrame=e,this.videoWidth=s,this.videoHeight=i}takePicture(){this.canvasFrame.width=160,this.canvasFrame.height=120,this.canvasFrame.getContext("2d").drawImage(this.video,0,0,this.videoWidth,this.videoHeight,0,0,this.width,this.height)}offpageCopy(t){t.width=this.videoWidth,t.height=this.videoHeight,t.getContext("2d").drawImage(this.video,0,0,this.videoWidth,this.videoHeight)}};!function(){const t=document.getElementsByClassName("reel-frame");for(let e=0;e<t.length;e++){t[e].width=300,t[e].height=225;let s=t[e].getContext("2d"),i=new Image;i.src=`./assets/Placeholder_${e+1}.jpg`,i.onload=function(){s.drawImage(i,0,0,300,225)}}}();const e=document.getElementById("start-video-btn"),s=new class{constructor(t,e){this.width=t,this.height=e,this.playing=!1}startVideo(){const t={audio:!1,video:{width:this.width,height:this.height}};navigator.mediaDevices.getUserMedia(t).then(this.success.bind(this)).catch(this.error)}success(t){this.playing=!0,document.getElementById("video").srcObject=t}error(t){console.log(t)}stopVideo(){let t=document.getElementById("video");t.srcObject.getTracks().forEach((t=>{t.stop()})),t.srcObject=null,this.playing=!1}}(610,469);let i;e.addEventListener("click",(t=>{i=document.getElementById("video"),!0===s.playing?s.stopVideo():s.startVideo()}));const a=document.getElementById("multi-capture-btn"),n=document.getElementById("picture-count"),o=document.getElementById("countdown"),r=document.getElementById("flash"),h=document.getElementsByClassName("offpage-frame"),d=document.getElementById("caption");a.addEventListener("click",(e=>{function s(t){return new Promise((e=>setTimeout(e,t)))}!async function(){let e=1;d.style.display="none",n.innerText=`${e} / 4`;for(let a=0;a<h.length;a++){r.style.visibility="hidden",r.classList.remove("flash");let d=3;o.innerText=d;let c=setInterval((()=>{d--,d<1&&(d=1),o.innerText=d}),1e3);await s(3500),r.style.visibility="visible",r.classList.add("flash"),await s(500),clearInterval(c),e++,n.innerText=`${e} / 4`,new t(i,frames[a],610,469).offpageCopy(h[a])}d.style.display="block",o.innerText="",n.innerText="",r.style.visibility="hidden",r.classList.remove("flash"),c()}()}));const c=function(){s.stopVideo(),new class{constructor(t,e,s){this.offpageCanvasArray=t,this.reelFrames=document.getElementsByClassName("reel-frame"),this.offpageCanvasWidth=e,this.offpageCanvasHeight=s}generateReel(){for(let t=0;t<this.offpageCanvasArray.length;t++)this.reelFrames[t].width=300,this.reelFrames[t].height=225,this.reelFrames[t].getContext("2d").drawImage(this.offpageCanvasArray[t],0,0,this.offpageCanvasWidth,this.offpageCanvasHeight,0,0,300,225)}}(h,610,469).generateReel()},l=document.getElementById("frame-list"),g=document.getElementById("background-canvas");let m=document.getElementById("start-frame");g.width=800,g.height=650;let f=g.getContext("2d"),v=new Image;v.src=`./assets/frame_${m.dataset.frame}.png`,v.onload=function(){f.drawImage(v,0,0,800,650)},l.addEventListener("click",(t=>{if("IMG"===t.target.tagName){m&&m.classList.remove("selected-frame"),t.target.classList.add("selected-frame"),m=t.target,g.width=800,g.height=650;let e=g.getContext("2d"),s=new Image;s.src=`./assets/frame_${t.target.dataset.frame}.png`,s.onload=function(){e.drawImage(s,0,0,800,650)}}}));const u=document.getElementById("sticker-list"),y=document.getElementById("sticker-canvas");y.width=800,y.height=650;const p=[];let w;function I(t,e){var s=t.getBoundingClientRect();return{x:e.clientX-s.left,y:e.clientY-s.top}}u.addEventListener("click",(t=>{if("LI"===t.target.parentNode.tagName){let e=t.target.dataset.type,s=new class{constructor(t,e){this.stickerType=e,this.canvas=t,this.width=75,this.height=75,this.posX=0,this.posY=0,this.sticker=new class{constructor(t,e,s,i){this.canvas=t,this.x=e,this.y=s,this.stickerType=i,this.stickerImage=new Image,this.stickerImage.src=`./assets/sticker_${this.stickerType}.png`}drawSticker(t,e){this.x=t,this.y=e,this.canvas.getContext("2d").drawImage(this.stickerImage,this.x,this.y,75,75*this.stickerImage.height/this.stickerImage.width)}}(this.canvas,this.posX,this.posY,e),this.drawSticker()}drawSticker(){this.sticker.drawSticker(this.posX,this.posY)}hit(t,e){let s=this.posX+this.width,i=this.posY+this.height;if(t>this.posX&&t<s&&e>this.posY&&e<i)return!0}}(y,e);p.push(s)}})),y.addEventListener("mousedown",(t=>{let e=I(y,t);for(let t=0;t<p.length;t++)if(p[t].hit(e.x,e.y)){let s=p[t];const i=y.getContext("2d");w=t=>{e=I(y,t),s.posX=e.x,s.posY=e.y,i.clearRect(0,0,y.width,y.height);for(let t=0;t<p.length;t++)p[t].drawSticker()},y.addEventListener("mousemove",w);break}})),y.addEventListener("mouseup",(t=>{y.removeEventListener("mousemove",w)}));const E=document.getElementById("text-color-select"),k=document.getElementById("text-font-select");E.addEventListener("click",(t=>{"LI"===t.target.tagName&&(d.style.color=t.target.dataset.color)})),k.addEventListener("click",(t=>{"LI"===t.target.tagName&&(d.style.fontFamily=t.target.dataset.font)}))}()}();
//# sourceMappingURL=main.js.map