!function(){"use strict";!function(){var t=class{constructor(t,e,s,i){this.video=t,this.canvasFrame=e,this.videoWidth=s,this.videoHeight=i}takePicture(){this.canvasFrame.width=160,this.canvasFrame.height=120,this.canvasFrame.getContext("2d").drawImage(this.video,0,0,this.videoWidth,this.videoHeight,0,0,this.width,this.height)}offpageCopy(t){t.width=this.videoWidth,t.height=this.videoHeight,t.getContext("2d").drawImage(this.video,0,0,this.videoWidth,this.videoHeight)}};!function(){const t=document.getElementsByClassName("reel-frame");for(let e=0;e<t.length;e++){t[e].width=300,t[e].height=225;let s=t[e].getContext("2d"),i=new Image;i.src=`./assets/Placeholder_${e+1}.jpg`,i.onload=function(){s.drawImage(i,0,0,300,225)}}}(),document.getElementById("start-video-btn");const e=document.getElementById("multi-capture-btn"),s=document.getElementById("picture-count"),i=document.getElementById("countdown"),a=document.getElementById("flash"),n=document.getElementsByClassName("offpage-frame"),r=document.getElementById("caption"),o=new class{constructor(t,e){this.width=t,this.height=e,this.playing=!1}startVideo(){const t={audio:!1,video:{width:this.width,height:this.height}};navigator.mediaDevices.getUserMedia(t).then(this.success.bind(this)).catch(this.error)}success(t){this.playing=!0,document.getElementById("video").srcObject=t}error(t){console.log(t)}stopVideo(){let t=document.getElementById("video");t.srcObject.getTracks().forEach((t=>{t.stop()})),t.srcObject=null,this.playing=!1}}(610,469),d=document.getElementById("video"),h=document.getElementById("reel");1!=o.playing&&o.startVideo(),e.addEventListener("click",(l=>{function g(t){return new Promise((e=>setTimeout(e,t)))}o.playing&&async function(){h.style.visibility="hidden",d.style.visibility="visible",r.style.display="none",e.disabled=!0;let o=1;s.innerText=`${o} / 4`;for(let e=0;e<n.length;e++){a.style.visibility="hidden",a.classList.remove("flash");let r=3;i.innerText=r;let h=setInterval((()=>{r--,r<1&&(r=1),i.innerText=r}),1e3);await g(3500),a.style.visibility="visible",a.classList.add("flash"),await g(500),clearInterval(h),o++,s.innerText=`${o} / 4`,new t(d,frames[e],610,469).offpageCopy(n[e])}r.style.display="block",i.innerText="",s.innerText="",a.style.visibility="hidden",a.classList.remove("flash"),h.style.visibility="visible",h.style.zIndex=0,d.style.visibility="hidden",e.disabled=!1,c()}()}));const c=function(){new class{constructor(t,e,s){this.offpageCanvasArray=t,this.reelFrames=document.getElementsByClassName("reel-frame"),this.offpageCanvasWidth=e,this.offpageCanvasHeight=s}generateReel(){for(let t=0;t<this.offpageCanvasArray.length;t++)this.reelFrames[t].width=300,this.reelFrames[t].height=225,this.reelFrames[t].getContext("2d").drawImage(this.offpageCanvasArray[t],0,0,this.offpageCanvasWidth,this.offpageCanvasHeight,0,0,300,225)}}(n,610,469).generateReel()},l=document.getElementById("frame-list"),g=document.getElementById("background-canvas");let m=document.getElementById("start-frame");g.width=800,g.height=650;let v=g.getContext("2d"),y=new Image;y.src=`./assets/frame_${m.dataset.frame}.png`,y.onload=function(){v.drawImage(y,0,0,800,650)},l.addEventListener("click",(t=>{if("IMG"===t.target.tagName){m&&m.classList.remove("selected-frame"),t.target.classList.add("selected-frame"),m=t.target,g.width=800,g.height=650;let e=g.getContext("2d"),s=new Image;s.src=`./assets/frame_${t.target.dataset.frame}.png`,s.onload=function(){e.drawImage(s,0,0,800,650)}}}));const f=document.getElementById("sticker-list"),u=document.getElementById("sticker-canvas");u.width=800,u.height=525;const p=[];let w;function I(t,e){var s=t.getBoundingClientRect();return{x:e.clientX-s.left,y:e.clientY-s.top}}f.addEventListener("click",(t=>{if("LI"===t.target.parentNode.tagName){let e=t.target.dataset.type,s=new class{constructor(t,e){this.stickerType=e,this.canvas=t,this.width=75,this.height=75,this.posX=0,this.posY=0,this.sticker=new class{constructor(t,e,s,i){this.canvas=t,this.x=e,this.y=s,this.stickerType=i,this.stickerImage=new Image,this.stickerImage.src=`./assets/sticker_${this.stickerType}.png`}drawSticker(t,e){this.x=t,this.y=e,this.canvas.getContext("2d").drawImage(this.stickerImage,this.x,this.y,75,75*this.stickerImage.height/this.stickerImage.width)}}(this.canvas,this.posX,this.posY,e),this.drawSticker()}drawSticker(){this.sticker.drawSticker(this.posX,this.posY)}hit(t,e){let s=this.posX+this.width,i=this.posY+this.height;if(t>this.posX&&t<s&&e>this.posY&&e<i)return!0}}(u,e);p.push(s)}})),u.addEventListener("mousedown",(t=>{let e=I(u,t);for(let t=0;t<p.length;t++)if(p[t].hit(e.x,e.y)){let s=p[t];const i=u.getContext("2d");w=t=>{e=I(u,t),s.posX=e.x,s.posY=e.y,i.clearRect(0,0,u.width,u.height);for(let t=0;t<p.length;t++)p[t].drawSticker()},u.addEventListener("mousemove",w);break}})),u.addEventListener("mouseup",(t=>{u.removeEventListener("mousemove",w)}));const E=document.getElementById("text-color-select"),k=document.getElementById("text-font-select");E.addEventListener("click",(t=>{"LI"===t.target.tagName&&(r.style.color=t.target.dataset.color)})),k.addEventListener("click",(t=>{"LI"===t.target.tagName&&(r.style.fontFamily=t.target.dataset.font)}))}()}();
//# sourceMappingURL=main.js.map